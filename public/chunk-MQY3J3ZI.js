import{b as D}from"./chunk-4BOBBNNX.js";import{a as ee,b as te,c as ae,d as ie,e as ne,f as oe,g as re,h as me,i as le,j as pe,k as se,l as de,m as ce,n as fe}from"./chunk-AYFB3NRK.js";import{a as ue,b as ge,c as Ce,d as Te,e as ye,f as Me,g as _e,h as he}from"./chunk-5VRKR4PS.js";import{a as Y,b as Z}from"./chunk-AJNVVCZR.js";import{b as q,g as W,h as U,j as Q,k as X}from"./chunk-RFB2B4XO.js";import"./chunk-55VYKXYZ.js";import{B as $,Ba as L,Ha as h,Ja as j,Ka as b,La as J,Ma as K,k as P,m as v,p as V,q as z,t as B,v as G,y as H,z as O}from"./chunk-HCUTLELD.js";import{Bb as u,Ib as g,Kb as l,Kc as k,Qb as E,Sb as I,Tb as R,Ub as n,Vb as o,Wb as d,Xb as M,Yb as _,_b as N,bc as c,dc as F,ib as m,la as s,oc as r,pc as A,qc as C,rb as y,ua as S,va as w}from"./chunk-2UWQULQ5.js";function Se(e,a){if(e&1&&(n(0,"mat-option",4),r(1),o()),e&2){let t=a.$implicit;l("value",t.value),m(),A(t.label)}}var T=class e{fb=s(O);typeTreatmentService=s(D);dialogRef=s(ue);data=s(ge);categories=[{value:"VACUNACION",label:"Vacunacion"},{value:"DESPARASITACION",label:"Desparasitacion"}];formCenter=this.fb.group({name:["",v.required],category:["",v.required]});ngOnInit(){this.formCenter.patchValue(this.data??{})}save(){(this.data?this.typeTreatmentService.edit(this.data.id,this.formCenter.value):this.typeTreatmentService.add(this.formCenter.value)).subscribe(t=>{this.dialogRef.close(t)})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=y({type:e,selectors:[["app-type-treatment-dialog"]],decls:19,vars:3,consts:[["mat-dialog-title",""],[1,"py-2",3,"formGroup"],["appearance","outline"],["formControlName","category"],[3,"value"],["formControlName","name","matInput",""],["align","end"],["mat-button","","color","warn","mat-dialog-close",""],["mat-button","","color","primary",3,"click","disabled"]],template:function(t,i){t&1&&(n(0,"h2",0),r(1),o(),n(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),r(6,"Categoria"),o(),n(7,"mat-select",3),I(8,Se,2,2,"mat-option",4,E),o()(),n(10,"mat-form-field",2)(11,"mat-label"),r(12,"Nombre"),o(),d(13,"input",5),o()()(),n(14,"mat-dialog-actions",6)(15,"button",7),r(16,"Cancelar"),o(),n(17,"button",8),c("click",function(){return i.save()}),r(18," Guardar "),o()()),t&2&&(m(),C("",i.data?"Edicion":"Creacion"," Tratamiento"),m(2),l("formGroup",i.formCenter),m(5),R(i.categories),m(9),l("disabled",i.formCenter.invalid))},dependencies:[$,B,P,V,z,G,H,he,Te,ye,_e,Me,U,W,q,X,Q,b,h,Z,Y,L],encapsulation:2,changeDetection:0})};function we(e,a){e&1&&(n(0,"th",18),r(1,"Categoria"),o())}function Ee(e,a){if(e&1&&(n(0,"td",19),r(1),o()),e&2){let t=a.$implicit;m(),C(" ",t.category," ")}}function Ie(e,a){e&1&&(n(0,"th",18),r(1,"Nombre"),o())}function Re(e,a){if(e&1&&(n(0,"td",19),r(1),o()),e&2){let t=a.$implicit;m(),C(" ",t.name," ")}}function Ne(e,a){e&1&&d(0,"th",18)}function Fe(e,a){if(e&1){let t=N();n(0,"td",20)(1,"button",21),c("click",function(){let p=S(t).$implicit,f=F();return w(f.update(p))}),n(2,"mat-icon"),r(3,"edit"),o()()()}}function Ae(e,a){e&1&&d(0,"tr",22)}function ke(e,a){e&1&&d(0,"tr",23)}function Pe(e,a){e&1&&(n(0,"tr",24)(1,"td",25),r(2,"No se encontraron resultados"),o()())}var x=class e{dialog=s(Ce);medicalCenterService=s(D);displayedColumns=["category","name","buttons"];datasource=u([]);datasize=u(0);limit=u(10);index=u(0);offset=k(()=>this.limit()*this.index());ngOnInit(){this.getData()}getData(){this.medicalCenterService.get(this.limit(),this.offset()).subscribe(({treatments:a,length:t})=>{this.datasource.set(a),this.datasize.set(t)})}create(){this.dialog.open(T,{width:"600px",maxWidth:"600px"}).afterClosed().subscribe(t=>{t&&(this.datasource.update(i=>(i.length===this.limit()&&i.pop(),[t,...i])),this.datasize.update(i=>i+=1))})}update(a){this.dialog.open(T,{width:"600px",maxWidth:"600px",data:a}).afterClosed().subscribe(i=>{i&&this.datasource.update(p=>{let f=p.findIndex(be=>be.id===i.id);return p[f]=i,[...p]})})}onPageChange(a){this.limit.set(a.pageSize),this.index.set(a.pageIndex),this.getData()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=y({type:e,selectors:[["app-types-treatments-manage"]],decls:26,vars:6,consts:[[1,"animate-fade"],[1,"flex","px-4","py-3","items-center"],[1,"text-2xl"],[1,"flex-1"],["mat-flat-button","",3,"click"],[1,"px-2"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","category"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","buttons"],["mat-cell","","class","w-8",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users search results","showFirstLastButtons","",3,"page","length","pageSize","pageIndex"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"w-8"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-3"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),r(3,"Tratamientos"),o(),d(4,"div",3),n(5,"div")(6,"button",4),c("click",function(){return i.create()}),n(7,"mat-icon"),r(8,"add"),o(),r(9," Agregar "),o()()(),n(10,"div",5)(11,"div",6)(12,"table",7),M(13,8),g(14,we,2,0,"th",9)(15,Ee,2,1,"td",10),_(),M(16,11),g(17,Ie,2,0,"th",9)(18,Re,2,1,"td",10),_(),M(19,12),g(20,Ne,1,0,"th",9)(21,Fe,4,0,"td",13),_(),g(22,Ae,1,0,"tr",14)(23,ke,1,0,"tr",15)(24,Pe,3,0,"tr",16),o(),n(25,"mat-paginator",17),c("page",function(f){return i.onPageChange(f)}),o()()()()),t&2&&(m(12),l("dataSource",i.datasource()),m(10),l("matHeaderRowDef",i.displayedColumns),m(),l("matRowDefColumns",i.displayedColumns),m(2),l("length",i.datasize())("pageSize",10)("pageIndex",i.index()))},dependencies:[fe,ae,ne,le,oe,ie,pe,re,me,se,de,ce,j,b,h,K,J,te,ee],encapsulation:2,changeDetection:0})};export{x as default};
