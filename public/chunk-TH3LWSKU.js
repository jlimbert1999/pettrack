import{a as v}from"./chunk-4BOBBNNX.js";import{a as Y,b as Z,c as ee,d as te,e as ie,f as ae,g as ne,h as oe,i as re,j as le,k as me,l as de,m as se,n as ce}from"./chunk-AYFB3NRK.js";import{b as X}from"./chunk-FESQCAAM.js";import{a as pe,b as fe,c as ue,d as Ce,e as ge,f as Me,g as he,h as _e}from"./chunk-5VRKR4PS.js";import"./chunk-AJNVVCZR.js";import{b as j,g as W,h as q,j as Q,k as U}from"./chunk-RFB2B4XO.js";import"./chunk-55VYKXYZ.js";import{A as O,B as L,Ha as b,Ja as $,Ka as D,La as J,Ma as K,k,m as z,p as G,q as P,t as A,v as B,y as H,z as V}from"./chunk-HCUTLELD.js";import{Bb as C,Ib as M,Kb as m,Kc as N,Ub as n,Vb as o,Wb as c,Xb as x,Yb as S,Zc as F,_b as I,bc as p,dc as R,fd as _,ib as l,la as s,oc as r,qc as h,rb as g,ua as y,va as E,wc as T}from"./chunk-2UWQULQ5.js";var f=class e{fb=s(V);medicalCenterService=s(v);dialogRef=s(pe);data=s(fe);formCenter=this.fb.group({name:["",z.required]});ngOnInit(){this.formCenter.patchValue(this.data??{})}save(){(this.data?this.medicalCenterService.edit(this.data.id,this.formCenter.value):this.medicalCenterService.add(this.formCenter.value)).subscribe(a=>{this.dialogRef.close(a)})}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=g({type:e,selectors:[["app-medical-center-dialog"]],decls:13,vars:3,consts:[["mat-dialog-title",""],[1,"py-2",3,"formGroup"],["appearance","outline"],["formControlName","name","matInput",""],["align","end"],["mat-button","","color","warn","mat-dialog-close",""],["mat-button","","color","primary",3,"click","disabled"]],template:function(a,t){a&1&&(n(0,"h2",0),r(1),o(),n(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),r(6,"Nombre"),o(),c(7,"input",3),o()()(),n(8,"mat-dialog-actions",4)(9,"button",5),r(10,"Cancelar"),o(),n(11,"button",6),p("click",function(){return t.save()}),r(12," Guardar "),o()()),a&2&&(l(),h("",t.data?"Edicion":"Creacion"," Centro de Salud"),l(2),m("formGroup",t.formCenter),l(8),m("disabled",t.formCenter.invalid))},dependencies:[_,L,A,k,G,P,B,H,_e,Ce,ge,he,Me,q,W,j,U,Q,D,b],encapsulation:2,changeDetection:0})};var Se=e=>({"is-disabled":e});function we(e,i){e&1&&(n(0,"th",17),r(1,"Nombre"),o())}function ye(e,i){if(e&1&&(n(0,"td",18),r(1),o()),e&2){let a=i.$implicit;l(),h(" ",a.name," ")}}function Ee(e,i){e&1&&c(0,"th",17)}function Ie(e,i){if(e&1){let a=I();n(0,"td",19)(1,"button",20),p("click",function(){let d=y(a).$implicit,u=R();return E(u.update(d))}),n(2,"mat-icon"),r(3,"edit"),o()()()}}function Re(e,i){e&1&&c(0,"tr",21)}function Te(e,i){if(e&1&&c(0,"tr",22),e&2){let a=i.$implicit;m("ngClass",T(1,Se,a.activo===!1))}}function Ne(e,i){e&1&&(n(0,"tr",23)(1,"td",24),r(2,"No se encontraron resultados"),o()())}var w=class e{dialog=s(ue);medicalCenterService=s(v);displayedColumns=["name","buttons"];datasource=C([]);datasize=C(0);limit=C(10);index=C(0);offset=N(()=>this.limit()*this.index());ngOnInit(){this.getData()}getData(){this.medicalCenterService.get(this.limit(),this.offset()).subscribe(i=>{this.datasource.set(i.medicalCenters),this.datasize.set(i.length)})}create(){this.dialog.open(f,{width:"600px",maxWidth:"600px"}).afterClosed().subscribe(a=>{a&&(this.datasource.update(t=>(t.length===this.limit()&&t.pop(),[a,...t])),this.datasize.update(t=>t+=1))})}update(i){this.dialog.open(f,{width:"600px",maxWidth:"600px",data:i}).afterClosed().subscribe(t=>{t&&this.datasource.update(d=>{let u=d.findIndex(be=>be.id===t.id);return d[u]=t,[...d]})})}onPageChange(i){this.limit.set(i.pageSize),this.index.set(i.pageIndex),this.getData()}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=g({type:e,selectors:[["app-medical-centers-manage"]],decls:23,vars:6,consts:[[1,"animate-fade"],[1,"flex","px-4","py-3","items-center"],[1,"text-2xl"],[1,"flex-1"],["mat-flat-button","",3,"click"],[1,"px-2"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","buttons"],["mat-cell","","class","w-8",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users search results","showFirstLastButtons","",3,"page","length","pageSize","pageIndex"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"w-8"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row","",3,"ngClass"],[1,"mat-row"],["colspan","4",1,"mat-cell","p-3"]],template:function(a,t){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),r(3,"Centros"),o(),c(4,"div",3),n(5,"div")(6,"button",4),p("click",function(){return t.create()}),n(7,"mat-icon"),r(8,"add"),o(),r(9," Agregar "),o()()(),n(10,"div",5)(11,"div",6)(12,"table",7),x(13,8),M(14,we,2,0,"th",9)(15,ye,2,1,"td",10),S(),x(16,11),M(17,Ee,1,0,"th",9)(18,Ie,4,0,"td",12),S(),M(19,Re,1,0,"tr",13)(20,Te,1,3,"tr",14)(21,Ne,3,0,"tr",15),o(),n(22,"mat-paginator",16),p("page",function(u){return t.onPageChange(u)}),o()()()()),a&2&&(l(12),m("dataSource",t.datasource()),l(7),m("matHeaderRowDef",t.displayedColumns),l(),m("matRowDefColumns",t.displayedColumns),l(2),m("length",t.datasize())("pageSize",10)("pageIndex",t.index()))},dependencies:[_,F,O,K,J,D,b,$,Z,Y,ce,ee,ie,re,ae,te,le,ne,oe,me,de,se,X],encapsulation:2,changeDetection:0})};export{w as default};
